<article class="slds-card">
    <div class="slds-card__header slds-grid">
        <header class="slds-media slds-media_center slds-has-flexi-truncate">
            <div class="slds-media__body">
                <h2 class="slds-card__header-title">
                    <span class="slds-card__header-link slds-truncate" title="Popularity Prediction">
                        Data Experimentation
                    </span>
                </h2>
                <p>
                    Upload new data sets and output data sets with cleaned feature sets ready for processing, or
                    train new data models using a Random Forest classification method.
                </p>
            </div>
        </header>
    </div>
    <div class="slds-card__body slds-card__body_inner">
        <div class="slds-text-heading_medium">Process new Song Data</div>
        <ngl-alert *ngIf="hasError" class="slds-m-top_small" variant="error">{{errorText}}</ngl-alert>
        <div class="form-group action">
            <label for="file">Choose File</label>
            <input type="file" id="file" (change)="handleFileInput($event.target.files)" accept=".csv">
        </div>
        <div class="action">
            <p>Download a new .CSV file with features cleaned, filtered and weighted (ready for data analysis)</p>
            <button class="slds-button slds-button_brand" nglButton [disabled]="!file_enabled" (click)="getCleanData()">Get Clean Data</button>
        </div>
        <div class="action">
            <p>
                Train a new data model based on your uploaded data, and output model statistics and visualization
            </p>
            <button class="slds-button slds-button_brand" nglButton [disabled]="!file_enabled" (click)="trainModel()">Train Model</button>
        </div>
        <div *ngIf="hasModel">
            <app-data-model [model]="model"></app-data-model>
        </div>
    </div>
</article>

<div *ngIf="processing" style="height:6rem">
    <div class="slds-spinner_container">
        <div role="status" class="slds-spinner slds-spinner_medium">
            <span class="slds-assistive-text">Loading</span>
            <div class="slds-spinner__dot-a"></div>
            <div class="slds-spinner__dot-b"></div>
        </div>
    </div>
</div>