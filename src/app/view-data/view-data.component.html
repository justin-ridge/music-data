<article class="slds-card">
    <div class="slds-card__header slds-grid">
        <header class="slds-media slds-media_center slds-has-flexi-truncate">
            <div class="slds-media__body">
                <h2 class="slds-card__header-title">
                    <span class="slds-card__header-link slds-truncate" title="Song Data">
                        Song Data
                    </span>
                </h2>
            </div>
        </header>
    </div>
    <div class="slds-card__body slds-card__body_inner">
        <div class="slds-text-title_caps-normal slds-m-bottom_x-small">Showing songs {{itemStart}} - {{itemEnd}} of
            {{total}}
        </div>
        <ngl-pagination (pageChange)="changePage($event)" [(page)]="page" [total]="pageTotal" limit="5"
            boundaryNumbers="1" #pagination></ngl-pagination>
        Jump to: <input type="number" [(ngModel)]="page" (blur)="changePage($event.target.value)">
        <div>
            <button type="button" nglButton (click)="toggleDetails()">{{showDetailsText}}</button>
        </div>
    </div>
    <table class="slds-table_bordered slds-max-medium-table_stacked-horizontal" ngl-datatable [data]="songs"
        trackByKey="songid" [loading]="loading" [(sort)]="sort" (sortChange)="onSort($event)">
        <ngl-datatable-column heading="artist" key="artist" truncate sortable></ngl-datatable-column>
        <ngl-datatable-column heading="song name" key="name" truncate sortable></ngl-datatable-column>
        <ngl-datatable-column heading="genre" key="genre" truncate sortable></ngl-datatable-column>
        <ngl-datatable-column heading="song length" key="duration_ms" truncate sortable>
            <ng-template nglDatatableCell let-value>{{getTime(value)}}</ng-template>
        </ngl-datatable-column>
        <ngl-datatable-column heading="popularity" key="popularity" truncate sortable>
            <ng-template nglDatatableCell let-value>
                <ngl-badge [theme]="badgeTheme(value)">{{value | number}}</ngl-badge>
            </ng-template>
        </ngl-datatable-column>
        <ng-container *ngIf="showDetails">
            <ngl-datatable-column heading="acousticness" key="acousticness" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="danceability" key="danceability" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="energy" key="energy" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="instrumentalness" key="instrumentalness" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="liveness" key="liveness" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="loudness" key="loudness" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="speechiness" key="speechiness" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
            <ngl-datatable-column heading="valence" key="valence" truncate sortable>
                <ng-template nglDatatableCell let-value>{{rounded(value)}}</ng-template>
            </ngl-datatable-column>
        </ng-container>
        <!-- Loading overlay-->
        <ng-template nglLoadingOverlay>
            <div class="slds-box slds-box_small slds-theme_shade slds-text-align_center">Loading...</div>
        </ng-template>
        <!-- No rows overlay-->
        <ng-template nglNoRowsOverlay>No data available in table!</ng-template>
    </table>